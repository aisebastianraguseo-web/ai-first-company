# Product DNA — AI Navigation
# Generated by: Environment Architect Agent (EAA)
# Source: intake/ai-navigation.yaml
# Date: 2026-02-28
# ============================================================

# ── Intake (unverändert) ──────────────────────────────────────────────────────

product:
  id: "ai-navigation"
  name: "AI Navigation"
  description: >
    Strategisches Validierungs- und Monitoring-Framework für die KI-gestützte
    Produktentwicklung. Überwacht die KI-Landschaft via zweischichtigem Sensorsystem
    (Known Knowns: offizielle Vendor-Releases + Weak Signals: GitHub/arXiv/HN),
    bewertet Modelle nach dem CLEAR-Framework und leitet Enterprise-Teams mit dem
    AI-DNA-Framework bei der Transformation von Unternehmensproblemen in skalierten
    KI-Wert. Zielgruppe: CTO, CDO, Heads of Product in mittelständischen und großen
    Unternehmen (DACH/EU).

domain:
  category: "enterprise"
  subdomain: "ai-strategy"
  target_market: [DACH, EU, global]

complexity:
  score: 7
  data_model: "mixed"
  state_management: "distributed"
  concurrency: "medium"
  real_time: true

scale:
  initial_users: 50
  target_users: 5000
  data_volume: "medium"
  peak_tps: 100
  global_distribution: false
  high_availability: true

interfaces:
  primary: "web-desktop"
  secondary: [api-only, web-mobile]
  offline_support: false
  barcode_scanning: false
  print_integration: true

integrations:
  external_apis: [ai_ml, communication, analytics, identity]
  hardware: []
  legacy_systems: []
  webhooks: true

regulation:
  gdpr: true
  data_sensitivity: "medium"
  frameworks: [ISO-27001, BSI-IT]
  audit_trail: true
  data_residency: [EU, DE]

deployment:
  target: "saas"
  multi_tenant: true
  containerized: true
  ci_cd: "github-actions"

tech_stack:
  frontend: "next.js"
  backend: "python-fastapi"
  database: "auto"
  existing_stack: ""

team:
  human_ratio: 0.1
  daily_human_minutes: 30
  autonomy_override:
    architecture_decisions: HUMAN_REQUIRED
    ai_provider_contract:   HUMAN_REQUIRED
    enterprise_pricing:     HUMAN_REQUIRED
    data_residency_changes: HUMAN_REQUIRED

quality:
  test_coverage_target: 80
  performance_budget:
    page_load_ms: 2000
    api_response_ms: 500
    uptime_percent: 99.9

out_of_scope:
  - "Custom LLM Training oder Fine-Tuning für Kunden"
  - "Direktes Hosting von KI-Modellen (nur API-Integration)"
  - "Code-Ausführung oder Agenten-Deployment für End-User (Phase 1)"
  - "Native Mobile Apps iOS/Android (Phase 1)"
  - "Echtzeit-Börsen- oder Finanzdatenintegration"
  - "Support für non-cloud / air-gapped Enterprise-Deployments (Phase 1)"
  - "Automatisierte Vertragsverhandlungen mit KI-Anbietern"

success_metrics:
  - "Time-to-Insight: Neues Unternehmensproblem → erste strukturierte KI-Lösung < 15 Min"
  - "Weak-Signal-Latenz: Relevante GitHub/arXiv Durchbrüche innerhalb 24h im Dashboard"
  - "CLEAR-Framework: Modellempfehlung mit ROI-Prognose in < 5 Min generiert"
  - "Enterprise-Adoption: 80% der Pilot-Kunden nutzen AI-DNA-Framework aktiv nach 90 Tagen"
  - "NPS > 45 nach 6 Monaten"
  - "Churn: < 5% monatlich in den ersten 12 Monaten"

# ── Derived (EAA-berechnet) ───────────────────────────────────────────────────

derived:

  complexity_tier: "complex"
  # score=7 → complex (7-8); enterprise wäre 9-10
  # Implikation: Human-Checkpoint nach Phase 2 Pflicht, vollständige Gate-Suite

  tech_stack_resolved:
    frontend: "next.js"
    backend: "python-fastapi"
    database:
      primary: "postgresql"       # Relational: User, Tenant, Subscription, Audit
      cache_queue: "redis"        # Crawler-State, Job-Queue (Bull/Celery), Rate-Limiting
      vector: "pgvector"          # Semantische Suche: AI-DNA Problem-Matching
    hosting:
      frontend: "vercel"          # Next.js → Vercel (EU-Region fra1)
      backend: "render"           # FastAPI + Worker Services (EU-Region)
      database: "supabase"        # PostgreSQL + pgvector (EU-Frankfurt)
      cache: "upstash-redis"      # Serverless Redis (EU)
    containerization:
      strategy: "docker-compose-dev + k8s-prod"
      services:
        - name: "frontend"        # Next.js App Router
        - name: "api"             # FastAPI REST + WebSocket
        - name: "crawler-worker"  # Sensor A + B Crawler (Celery)
        - name: "clear-engine"    # CLEAR-Framework Berechnungslogik
        - name: "scheduler"       # Celery Beat — tägliche Crawler-Runs

  required_agents:
    meta:
      - persona-architect         # 6 Enterprise-Personas (CTO, CDO, Head of Product, ...)
      - spec-writer               # Feature-Specs: CLEAR, AI-DNA, Signal-Feed, Multi-Tenant
      - task-splitter             # complexity=7 → viele parallele Build-Tasks
    specialized:
      - security-challenger       # GDPR + ISO-27001 + Multi-Tenant Isolation
      - accessibility-challenger  # Web-Desktop Primary → WCAG 2.1 AA
      - quality-gate              # Coverage-Target 80%, Design System
      - performance-advisor       # 99.9% SLA, page_load < 2s, api < 500ms
      - infrastructure-agent      # K8s, Redis, pgvector, Multi-Tenant RLS
      - code-fixer                # Auto-Fix aus Gate-Ergebnissen

  pipeline_phases:
    - phase-1-personas            # 6 Enterprise-Personas
    - phase-2-specs               # CLEAR-Framework, AI-DNA, Signal-Feed, Multi-Tenant
    - human-checkpoint            # PFLICHT: complexity_tier=complex
    - phase-3-build               # Next.js + FastAPI + Crawler + DB Schema
    - phase-4-security            # GDPR, ISO-27001, Multi-Tenant IDOR, Audit-Trail
    - phase-5-a11y                # WCAG 2.1 AA, Enterprise-Dashboard
    - phase-5-quality             # 80% Coverage, Design System, API-Kontrakte
    - phase-5-performance         # 99.9% SLA, Crawler-Throughput, API-Latenz
    - phase-6-report              # Deployment-Ready Report
    - deploy                      # Vercel + Render/Fly.io + Supabase + Upstash

  autonomy_matrix:
    # Abgeleitet aus: human_ratio=0.1 + complexity_tier=complex + overrides
    full_autonomy:
      - bug_fixes
      - code_style
      - security_patches_minor    # CVE auto-fix
      - dependency_updates        # non-breaking
      - test_additions
      - documentation
      - a11y_fixes
      - performance_micro_opts
    batch_approval:
      - new_features_minor
      - ux_improvements
      - spec_updates
      - new_personas
      - crawler_source_additions
      - api_endpoint_additions
    human_required:
      - architecture_decisions    # explicit override
      - ai_provider_contract      # explicit override
      - enterprise_pricing        # explicit override
      - data_residency_changes    # explicit override
      - db_migrations             # derived: complexity >= 7 + multi_tenant
      - new_enterprise_features   # derived: enterprise category
      - security_policy_changes   # derived: ISO-27001
      - tenant_isolation_changes  # derived: multi_tenant=true

  compliance_requirements:
    gdpr:
      - data_processing_register  # Verzeichnis der Verarbeitungstätigkeiten
      - privacy_policy            # Vollständige Datenschutzerklärung
      - consent_management        # Analytics-Consent (Mixpanel)
      - data_deletion_api         # User-Datenlöschung auf Anfrage
      - dpa_template              # Auftragsverarbeitungsvertrag für Enterprise
    iso_27001:
      - access_control_policy
      - encryption_at_rest        # Supabase AES-256
      - encryption_in_transit     # TLS 1.3
      - vulnerability_scanning    # SAST + DAST in CI/CD
      - incident_response_plan
    bsi_it:
      - network_segmentation      # K8s NetworkPolicies
      - backup_strategy           # Supabase PITR + Redis Snapshots
      - security_monitoring       # Structured Logs + Alerting
    audit_trail:
      - immutable_event_log       # Append-only PostgreSQL Tabelle
      - who_what_when             # user_id, action, resource, timestamp
      - log_retention_7y          # HGB-konform für Enterprise-Kunden

  domain_experts_needed:
    - enterprise-b2b-saas         # Multi-Tenant Architektur, Enterprise-Pricing, SSO
    - ai-ml-integration           # CLEAR-Framework, LLM-API-Orchestrierung, Benchmarking
    - data-pipeline-architect     # Crawler-Design, Real-Time Signal Processing

  test_strategy:
    unit:
      coverage_target: 80
      focus:
        - clear_engine_calculations  # Deterministische Berechnungslogik
        - crawler_parsers            # HTML/API-Parser jeder Quelle
        - tenant_isolation           # RLS-Logik
        - ai_dna_matching            # Problem-Matching-Algorithmus
    integration:
      required: true
      focus:
        - supabase_rls              # Multi-Tenant Daten-Isolation
        - fastapi_auth_middleware   # JWT + Enterprise SSO
        - crawler_source_adapters   # Live-Calls gegen echte APIs (gemockt in CI)
        - clear_api_calls           # LLM-Provider-Integration
    e2e:
      required: true
      tool: "playwright"
      critical_flows:
        - onboarding_enterprise_tenant
        - clear_analysis_generation
        - weak_signal_feed_filter
        - ai_dna_problem_mapping
        - pdf_export
    security:
      sast: true                    # Bandit (Python) + ESLint Security (Next.js)
      dast: true                    # OWASP ZAP in CI
      dependency_scan: true         # Snyk / Dependabot
      multi_tenant_pentest: true    # Tenant A darf Tenant B nie sehen
    performance:
      load_test: true               # k6: 100 simultane User, 100 TPS
      crawler_throughput: true      # Crawler-Run < 5 Min für alle Quellen
      api_sla: true                 # 500ms p95 unter Last

  infrastructure_sizing:
    phase_1_beta:
      # 50 User, 5-10 Enterprise-Piloten
      frontend: "vercel-hobby-to-pro"
      api: "render-starter (512mb, 1 vCPU)"
      crawler_worker: "render-background-worker"
      database: "supabase-pro (8gb pgvector)"
      redis: "upstash-free"
      estimated_monthly_cost_eur: 80
    phase_2_growth:
      # 5000 User, 50+ Enterprise-Kunden
      frontend: "vercel-pro"
      api: "render-standard (2gb, 2 vCPU) x2"
      crawler_worker: "render-standard x2"
      database: "supabase-pro (16gb)"
      redis: "upstash-pay-per-request"
      estimated_monthly_cost_eur: 400

  build_context:
    # Für Phase-3-Build Agent — kritische Architektur-Entscheidungen
    multi_tenancy_pattern: "row-level-security"
    # Supabase RLS: tenant_id in jeder Tabelle, Clerk org_id = tenant_id
    crawler_pattern: "celery-beat"
    # Sensor A (täglich): Vendor-Changelogs; Sensor B (stündlich): GitHub/HN/arXiv
    clear_engine_pattern: "async-api-orchestration"
    # Parallele LLM-Calls an 5+ Provider, Ergebnis in DB gecacht (24h TTL)
    real_time_pattern: "supabase-realtime"
    # WebSocket für Feed-Updates; kein Full-Stack WebSocket-Server nötig
    pdf_export_pattern: "server-side-puppeteer"
    # FastAPI-Endpoint → Puppeteer → S3-ähnlicher Storage → Signed URL
    enterprise_sso_pattern: "clerk-organizations"
    # Clerk Organizations = Tenants; SAML/OIDC via Clerk Enterprise
